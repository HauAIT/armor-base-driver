"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _chai = _interopRequireDefault(require("chai"));
var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));
var _2 = require("../../..");
_chai.default.use(_chaiAsPromised.default);
describe('logging custom events', function () {
  it('should allow logging of events', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    await d.logCustomEvent('myorg', 'myevent');
    _lodash.default.keys(d._eventHistory).should.eql(['commands', 'myorg:myevent']);
  });
  it('should get all events including custom ones', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    d.logEvent('armorEvent');
    await d.logCustomEvent('myorg', 'myevent');
    const events = await d.getLogEvents();
    _lodash.default.keys(events).should.eql(['commands', 'armorEvent', 'myorg:myevent']);
  });
});
describe('#getLogEvents', function () {
  it('should allow to get all events', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents().should.eql({
      commands: [],
      testCommand: ['1', '2', '3']
    });
  });
  it('should filter with testCommand', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents('testCommand').should.eql({
      testCommand: ['1', '2', '3']
    });
  });
  it('should not filter with wrong but can be a part of the event name', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents('testCommandDummy').should.eql({});
  });
  it('should filter with multiple event keys', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    d._eventHistory.testCommand = ['1', '2', '3'];
    d._eventHistory.testCommand2 = ['4', '5'];
    await d.getLogEvents(['testCommand', 'testCommand2']).should.eql({
      testCommand: ['1', '2', '3'],
      testCommand2: ['4', '5']
    });
  });
  it('should filter with custom events', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    d._eventHistory['custom:armorEvent'] = ['1', '2', '3'];
    await d.getLogEvents(['custom:armorEvent']).should.eql({
      'custom:armorEvent': ['1', '2', '3']
    });
  });
  it('should not filter with no existed event name', async function () {
    const d = new _2.BaseDriver();
    d._eventHistory.should.eql({
      commands: []
    });
    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents(['noEventName']).should.eql({});
  });
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC9iYXNlZHJpdmVyL2NvbW1hbmRzL2V2ZW50LXNwZWNzLmpzIiwibmFtZXMiOlsiX2xvZGFzaCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoYWkiLCJfY2hhaUFzUHJvbWlzZWQiLCJfMiIsImNoYWkiLCJ1c2UiLCJjaGFpQXNQcm9taXNlZCIsImRlc2NyaWJlIiwiaXQiLCJkIiwiQmFzZURyaXZlciIsIl9ldmVudEhpc3RvcnkiLCJzaG91bGQiLCJlcWwiLCJjb21tYW5kcyIsImxvZ0N1c3RvbUV2ZW50IiwiXyIsImtleXMiLCJsb2dFdmVudCIsImV2ZW50cyIsImdldExvZ0V2ZW50cyIsInRlc3RDb21tYW5kIiwidGVzdENvbW1hbmQyIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLi8uLiIsInNvdXJjZXMiOlsidGVzdC9iYXNlZHJpdmVyL2NvbW1hbmRzL2V2ZW50LXNwZWNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCB7IEJhc2VEcml2ZXIgfSBmcm9tICcuLi8uLi8uLic7XG5cblxuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuXG5kZXNjcmliZSgnbG9nZ2luZyBjdXN0b20gZXZlbnRzJywgZnVuY3Rpb24gKCkge1xuICBpdCgnc2hvdWxkIGFsbG93IGxvZ2dpbmcgb2YgZXZlbnRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBhd2FpdCBkLmxvZ0N1c3RvbUV2ZW50KCdteW9yZycsICdteWV2ZW50Jyk7XG4gICAgXy5rZXlzKGQuX2V2ZW50SGlzdG9yeSkuc2hvdWxkLmVxbChbJ2NvbW1hbmRzJywgJ215b3JnOm15ZXZlbnQnXSk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGdldCBhbGwgZXZlbnRzIGluY2x1ZGluZyBjdXN0b20gb25lcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLl9ldmVudEhpc3Rvcnkuc2hvdWxkLmVxbCh7Y29tbWFuZHM6IFtdfSk7XG4gICAgZC5sb2dFdmVudCgnYXJtb3JFdmVudCcpO1xuICAgIGF3YWl0IGQubG9nQ3VzdG9tRXZlbnQoJ215b3JnJywgJ215ZXZlbnQnKTtcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkLmdldExvZ0V2ZW50cygpO1xuICAgIF8ua2V5cyhldmVudHMpLnNob3VsZC5lcWwoWydjb21tYW5kcycsICdhcm1vckV2ZW50JywgJ215b3JnOm15ZXZlbnQnXSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCcjZ2V0TG9nRXZlbnRzJywgZnVuY3Rpb24gKCkge1xuICBpdCgnc2hvdWxkIGFsbG93IHRvIGdldCBhbGwgZXZlbnRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoKS5zaG91bGQuZXFsKHtcbiAgICAgIGNvbW1hbmRzOiBbXSwgdGVzdENvbW1hbmQ6IFsnMScsICcyJywgJzMnXVxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZpbHRlciB3aXRoIHRlc3RDb21tYW5kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoJ3Rlc3RDb21tYW5kJykuc2hvdWxkLmVxbCh7XG4gICAgICB0ZXN0Q29tbWFuZDogWycxJywgJzInLCAnMyddXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm90IGZpbHRlciB3aXRoIHdyb25nIGJ1dCBjYW4gYmUgYSBwYXJ0IG9mIHRoZSBldmVudCBuYW1lJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoJ3Rlc3RDb21tYW5kRHVtbXknKS5zaG91bGQuZXFsKHt9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmaWx0ZXIgd2l0aCBtdWx0aXBsZSBldmVudCBrZXlzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgZC5fZXZlbnRIaXN0b3J5LnRlc3RDb21tYW5kMiA9IFsnNCcsICc1J107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoWyd0ZXN0Q29tbWFuZCcsICd0ZXN0Q29tbWFuZDInXSkuc2hvdWxkLmVxbCh7XG4gICAgICB0ZXN0Q29tbWFuZDogWycxJywgJzInLCAnMyddLCB0ZXN0Q29tbWFuZDI6IFsnNCcsICc1J11cbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmaWx0ZXIgd2l0aCBjdXN0b20gZXZlbnRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnlbJ2N1c3RvbTphcm1vckV2ZW50J10gPSBbJzEnLCAnMicsICczJ107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoWydjdXN0b206YXJtb3JFdmVudCddKS5zaG91bGQuZXFsKHtcbiAgICAgICdjdXN0b206YXJtb3JFdmVudCc6IFsnMScsICcyJywgJzMnXVxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG5vdCBmaWx0ZXIgd2l0aCBubyBleGlzdGVkIGV2ZW50IG5hbWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5fZXZlbnRIaXN0b3J5LnNob3VsZC5lcWwoe2NvbW1hbmRzOiBbXX0pO1xuICAgIGQuX2V2ZW50SGlzdG9yeS50ZXN0Q29tbWFuZCA9IFsnMScsICcyJywgJzMnXTtcbiAgICBhd2FpdCBkLmdldExvZ0V2ZW50cyhbJ25vRXZlbnROYW1lJ10pLnNob3VsZC5lcWwoe30pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsS0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsZUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsRUFBQSxHQUFBSCxPQUFBO0FBR0FJLGFBQUksQ0FBQ0MsR0FBRyxDQUFDQyx1QkFBYyxDQUFDO0FBRXhCQyxRQUFRLENBQUMsdUJBQXVCLEVBQUUsWUFBWTtFQUM1Q0MsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLGtCQUFrQjtJQUNyRCxNQUFNQyxDQUFDLEdBQUcsSUFBSUMsYUFBVSxDQUFDLENBQUM7SUFDMUJELENBQUMsQ0FBQ0UsYUFBYSxD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
