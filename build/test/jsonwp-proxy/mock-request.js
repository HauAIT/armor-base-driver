"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
function resFixture(url, method) {
  if (/\/status$/.test(url)) {
    return [200, {
      status: 0,
      value: {
        foo: 'bar'
      }
    }];
  }
  if (/\/element\/bad\/text$/.test(url)) {
    return [500, {
      status: 11,
      value: {
        message: 'Invisible element'
      }
    }];
  }
  if (/\/element\/200\/text$/.test(url)) {
    return [200, {
      status: 11,
      value: {
        message: 'Invisible element'
      }
    }];
  }
  if (/\/element\/200\/value$/.test(url)) {
    return [200, {
      status: 0,
      sessionId: 'innersessionid',
      value: 'foobar'
    }];
  }
  if (/\/session$/.test(url) && method === 'POST') {
    return [200, {
      status: 0,
      sessionId: '123',
      value: {
        browserName: 'boo'
      }
    }];
  }
  if (/\/nochrome$/.test(url)) {
    return [100, {
      status: 0,
      value: {
        message: 'chrome not reachable'
      }
    }];
  }
  throw new Error("Can't handle url " + url);
}
async function request(opts) {
  const {
    url,
    method,
    json
  } = opts;
  if (/badurl$/.test(url)) {
    throw new Error('noworky');
  }
  const [status, data] = resFixture(url, method, json);
  return {
    status,
    headers: {
      'content-type': 'application/json; charset=utf-8'
    },
    data
  };
}
var _default = exports.default = request;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC9qc29ud3AtcHJveHkvbW9jay1yZXF1ZXN0LmpzIiwibmFtZXMiOlsicmVzRml4dHVyZSIsInVybCIsIm1ldGhvZCIsInRlc3QiLCJzdGF0dXMiLCJ2YWx1ZSIsImZvbyIsIm1lc3NhZ2UiLCJzZXNzaW9uSWQiLCJicm93c2VyTmFtZSIsIkVycm9yIiwicmVxdWVzdCIsIm9wdHMiLCJqc29uIiwiZGF0YSIsImhlYWRlcnMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiIsInNvdXJjZXMiOlsidGVzdC9qc29ud3AtcHJveHkvbW9jay1yZXF1ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHJlc0ZpeHR1cmUgKHVybCwgbWV0aG9kKSB7XG4gIGlmICgvXFwvc3RhdHVzJC8udGVzdCh1cmwpKSB7XG4gICAgcmV0dXJuIFsyMDAsIHtzdGF0dXM6IDAsIHZhbHVlOiB7Zm9vOiAnYmFyJ319XTtcbiAgfVxuICBpZiAoL1xcL2VsZW1lbnRcXC9iYWRcXC90ZXh0JC8udGVzdCh1cmwpKSB7XG4gICAgcmV0dXJuIFs1MDAsIHtzdGF0dXM6IDExLCB2YWx1ZToge21lc3NhZ2U6ICdJbnZpc2libGUgZWxlbWVudCd9fV07XG4gIH1cbiAgaWYgKC9cXC9lbGVtZW50XFwvMjAwXFwvdGV4dCQvLnRlc3QodXJsKSkge1xuICAgIHJldHVybiBbMjAwLCB7c3RhdHVzOiAxMSwgdmFsdWU6IHttZXNzYWdlOiAnSW52aXNpYmxlIGVsZW1lbnQnfX1dO1xuICB9XG4gIGlmICgvXFwvZWxlbWVudFxcLzIwMFxcL3ZhbHVlJC8udGVzdCh1cmwpKSB7XG4gICAgcmV0dXJuIFsyMDAsIHtzdGF0dXM6IDAsIHNlc3Npb25JZDogJ2lubmVyc2Vzc2lvbmlkJywgdmFsdWU6ICdmb29iYXInfV07XG4gIH1cbiAgaWYgKC9cXC9zZXNzaW9uJC8udGVzdCh1cmwpICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIFsyMDAsIHtzdGF0dXM6IDAsIHNlc3Npb25JZDogJzEyMycsIHZhbHVlOiB7YnJvd3Nlck5hbWU6ICdib28nfX1dO1xuICB9XG4gIGlmICgvXFwvbm9jaHJvbWUkLy50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gWzEwMCwge3N0YXR1czogMCwgdmFsdWU6IHttZXNzYWdlOiAnY2hyb21lIG5vdCByZWFjaGFibGUnfX1dO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGhhbmRsZSB1cmwgXCIgKyB1cmwpO1xufVxuXG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0IChvcHRzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1hd2FpdFxuICBjb25zdCB7dXJsLCBtZXRob2QsIGpzb259ID0gb3B0cztcbiAgaWYgKC9iYWR1cmwkLy50ZXN0KHVybCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vd29ya3knKTtcbiAgfVxuXG4gIGNvbnN0IFtzdGF0dXMsIGRhdGFdID0gcmVzRml4dHVyZSh1cmwsIG1ldGhvZCwganNvbik7XG4gIHJldHVybiB7XG4gICAgc3RhdHVzLFxuICAgIGhlYWRlcnM6IHsnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnfSxcbiAgICBkYXRhLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCByZXF1ZXN0O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsU0FBU0EsVUFBVUEsQ0FBRUMsR0FBRyxFQUFFQyxNQUFNLEVBQUU7RUFDaEMsSUFBSSxXQUFXLENBQUNDLElBQUksQ0FBQ0YsR0FBRyxDQUFDLEVBQUU7SUFDekIsT0FBTyxDQUFDLEdBQUcsRUFBRTtNQUFDRyxNQUFNLEVBQUUsQ0FBQztNQUFFQyxLQUFLLEVBQUU7UUFBQ0MsR0FBRyxFQUFFO01BQUs7SUFBQyxDQUFDLENBQUM7RUFDaEQ7RUFDQSxJQUFJLHVCQUF1QixDQUFDSCxJQUFJLENBQUNGLEdBQUcsQ0FBQyxFQUFFO0lBQ3JDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7TUFBQ0csTUFBTSxFQUFFLEVBQUU7TUFBRUMsS0FBSyxFQUFFO1FBQUNFLE9BQU8sRUFBRTtNQUFtQjtJQUFDLENBQUMsQ0FBQztFQUNuRTtFQUNBLElBQUksdUJBQXVCLENBQUNKLElBQUksQ0FBQ0YsR0FBRyxDQUFDLEVBQUU7SUFDckMsT0FBTyxDQUFDLEdBQUcsRUFBRTtNQUFDRyxNQUFNLEVBQUUsRUFBRTtNQUFFQyxLQUFLLEVBQUU7UUFBQ0UsT0FBTyxFQUFFO01BQW1CO0lBQUMsQ0FBQyxDQUFDO0VBQ25FO0VBQ0EsSUFBSSx3QkFBd0IsQ0FBQ0osSUFBSSxDQUFDRixHQUFHLENBQUMsRUFBRTtJQUN0QyxPQUFPLENBQUMsR0FBRyxFQUFFO01BQUNHLE1BQU0sRUFBRSxDQUFDO01BQUVJLFNBQVMsRUFBRSxnQkFBZ0I7TUFBRUgsS0FBSyxFQUFFO0lBQVEsQ0FBQyxDQUFDO0VBQ3pFO0VBQ0EsSUFBSSxZQUFZLENBQUNGLElBQUksQ0FBQ0YsR0FBRyxDQUFDLElBQUlDLE1BQU0sS0FBSyxNQUFNLEVBQUU7SUFDL0MsT0FBTyxDQUFDLEdBQUcsRUFBRTtNQUFDRSxNQUFNLEVBQUUsQ0FBQztNQUFFSSxTQUFTLEVBQUUsS0FBSztNQUFFSCxLQUFLLEVBQUU7UUFBQ0ksV0FBVyxFQUFFO01BQUs7SUFBQyxDQUFDLENBQUM7RUFDMUU7RUFDQSxJQUFJLGFBQWEsQ0FBQ04sSUFBSSxDQUFDRixHQUFHLENBQUMsRUFBRTtJQUMzQixPQUFPLENBQUMsR0FBRyxFQUFFO01BQUNHLE1BQU0sRUFBRSxDQUFDO01BQUVDLEtBQUssRUFBRTtRQUFDRSxPQUFPLEVBQUU7TUFBc0I7SUFBQyxDQUFDLENBQUM7RUFDckU7RUFDQSxNQUFNLElBQUlHLEtBQUssQ0FBQyxtQkFBbUIsR0FBR1QsR0FBRyxDQUFDO0FBQzVDO0FBRUEsZUFBZVUsT0FBT0EsQ0FBRUMsSUFBSSxFQUFFO0VBQzVCLE1BQU07SUFBQ1gsR0FBRztJQUFFQyxNQUFNO0lBQUVXO0VBQUksQ0FBQyxHQUFHRCxJQUFJO0VBQ2hDLElBQUksU0FBUyxDQUFDVCxJQUFJLENBQUNGLEdBQUcsQ0FBQyxFQUFFO0lBQ3ZCLE1BQU0sSUFBSVMsS0FBSyxDQUFDLFNBQVMsQ0FBQztFQUM1QjtFQUVBLE1BQU0sQ0FBQ04sTUFBTSxFQUFFVSxJQUFJLENBQUMsR0FBR2QsVUFBVSxDQUFDQyxHQUFHLEVBQUVDLE1BQU0sRUFBRVcsSUFBSSxDQUFDO0VBQ3BELE9BQU87SUFDTFQsTUFBTTtJQUNOVyxPQUFPLEVBQUU7TUFBQyxjQUFjLEVBQUU7SUFBaUMsQ0FBQztJQUM1REQ7RUFDRixDQUFDO0FBQ0g7QUFBQyxJQUFBRSxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVjUCxPQUFPIn0=
